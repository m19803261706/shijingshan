# PRD: 北京市石景山医院不良事件上报系统

## 基本信息

- **项目**: bj-shijingshan
- **功能**: 不良事件上报系统
- **创建时间**: 2025-01-18
- **优先级**: P1 高
- **MVP 范围**: 基本完整

## 技术栈

| 层级 | 技术选型 |
|------|----------|
| **后端框架** | JeecgBoot 3.8.x (Spring Boot 3 + JDK 17) |
| **前端框架** | jeecgboot-vue3 (Vue3 + TypeScript + Vite + Ant Design Vue 4) |
| **数据库** | MySQL 8.0 |
| **数据库迁移** | Flyway |
| **缓存** | Redis |
| **端口配置** | 后端 9080，前端 3100 |

## 功能概述

基于 JeecgBoot 框架开发的医疗安全不良事件上报系统，实现事件上报、审核、处理、整改的全流程闭环管理。

### 核心业务流程

```
临床人员上报 → 科室审核 → 职能科室处理 → 整改 → 确认结案
```

### 事件状态流转

```
草稿 → 待审核 → (退回 ↔ 待审核) → 待处理 → (待整改 ↔ 整改中) → 已结案
```

## 功能模块清单

### 1. 事件上报模块
- 新建上报单（选择分类、填写信息、上传附件）
- 保存草稿
- 提交上报
- 我的上报列表
- 修改重提（针对退回事件）

### 2. 科室审核模块
- 待审核列表
- 事件详情查看
- 审核通过（流转至职能科室）
- 审核退回（填写退回原因）
- 已审核列表

### 3. 职能科室处理模块
- 待处理列表
- 要求整改（填写整改意见和期限）
- 直接结案
- 待确认列表（整改提交后）
- 确认整改/要求再次整改
- 已结案列表

### 4. 整改管理模块
- 待整改列表
- 查看整改要求
- 填写整改措施
- 提交整改
- 整改记录查看

### 5. 事件查询模块
- 多条件筛选查询
- 事件详情及流转记录
- 导出 Excel

### 6. 统计分析模块
- 按科室统计
- 按分类统计
- 按时间统计（月/季/年趋势）
- 按状态统计
- 报表导出

### 7. 系统管理模块（利用 JeecgBoot 内置功能）
- 用户管理
- 角色管理
- 科室管理（扩展）
- 事件分类管理（自定义）
- 操作日志

## 角色权限矩阵

| 功能模块 | 临床人员 | 临床审核人员 | 职能科室人员 | 系统管理员 |
|----------|:--------:|:------------:|:------------:|:----------:|
| 事件上报 | ✓ | ✓ | - | - |
| 科室审核 | - | ✓ | - | - |
| 职能处理 | - | - | ✓ | - |
| 填写整改 | ✓ | ✓ | - | - |
| 事件查询 | 本人 | 本科室 | 本科室 | 全部 |
| 统计分析 | - | 本科室 | 本科室 | 全部 |
| 系统管理 | - | - | - | ✓ |

## 数据库设计（初步）

### 核心表

1. **adverse_event** - 不良事件主表
2. **adverse_event_flow** - 事件流转记录表
3. **adverse_event_rectify** - 整改记录表
4. **event_category** - 事件分类表
5. **department** - 科室表（扩展 JeecgBoot 组织机构）

### 数据字典

- event_status: 事件状态
- event_level: 事件级别（Ⅰ/Ⅱ/Ⅲ/Ⅳ）
- event_category: 事件分类

## 任务拆分（初步）

### Phase 1: 基础设施（预计 2 天）
- [ ] 拉取 JeecgBoot 前后端代码
- [ ] 修改端口配置（后端 9080，前端 3100）
- [ ] 创建业务模块 jeecg-module-adverse-event
- [ ] 配置数据库连接

### Phase 2: 数据库设计（预计 2 天）
- [ ] 设计核心数据表
- [ ] 创建 Flyway 迁移脚本
- [ ] 配置数据字典

### Phase 3: 后端开发（预计 5 天）
- [ ] 事件上报 API
- [ ] 科室审核 API
- [ ] 职能处理 API
- [ ] 整改管理 API
- [ ] 事件查询 API
- [ ] 统计分析 API

### Phase 4: 前端开发（预计 5 天）
- [ ] 事件上报页面
- [ ] 审核处理页面
- [ ] 整改管理页面
- [ ] 查询统计页面
- [ ] 系统配置页面

### Phase 5: 菜单与权限（预计 1 天）
- [ ] 创建菜单 SQL
- [ ] 配置角色权限

## 验收标准

- [ ] 完整的事件上报流程可走通
- [ ] 各角色权限正确隔离
- [ ] 事件状态流转符合业务规则
- [ ] 统计报表数据准确
- [ ] 系统响应时间 ≤ 3 秒

## 需求来源

- 原始需求文档: `/Users/cx/Documents/code/java/bj-shijingshan/不良事件上报系统需求文档.md`

---
> TC 系统 PRD 文档
> 创建时间: 2025-01-18
